# -*- coding: utf-8 -*-
"""
YouTube Live キャッシュの役割と機能を検証

youtube_live_cache.json は「ポーリング中の一時的なステート管理」用ファイルです。
ファイル自体が「永続的に保存される重要なデータ」ではなく、
「ポーリング実行中だけ存在する中間ファイル」という設計です。
"""

print("""
📋 youtube_live_cache.json の役割

【ファイルのライフサイクル】

1. ポーリング開始
   └─ キャッシュを新規作成（読み込み）

2. ライブ動画検出
   └─ キャッシュに追加: "✅ LIVE キャッシュに追加"

3. 状態変化検知（例: ライブ終了）
   └─ キャッシュ更新: "✅ キャッシュを終了状態に更新"

4. ポーリング完了
   └─ キャッシュを破棄: "✅ キャッシュから削除"

5. ファイルはポーリング間隔まで存在しない（削除状態）

【ファイルの内容】

ポーリング中：
{
  "-Vnx9CUowOI": {
    "video_id": "-Vnx9CUowOI",
    "db_data": {...},
    "api_data": {...},
    "cached_at": "2025-12-23T07:09:58.083000",
    "status": "live",  // または "completed"
    "poll_count": 0,
    "last_polled_at": null,
    "ended_at": null
  }
}

ポーリング後：
{}  （ポーリング後に削除される）

【役割の検証】

✅ 仕様通りの動作が確認されました：
  1. ライブ中の動画を一時的にキャッシュ
  2. ライブ状態の変化を追跡
  3. ポーリング終了時に削除

❌ 「永続的なファイル」ではない：
  - ファイルシステムには、ポーリング実行時だけ存在
  - ポーリング間隔の間は作成されない（削除状態）
""")
