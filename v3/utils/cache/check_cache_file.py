#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
"""
from pathlib import Path
import json

cache_file = Path('v2/data/youtube_video_detail_cache.json')

print("=" * 80)
print("ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª")
print("=" * 80)

if cache_file.exists():
    file_size = cache_file.stat().st_size
    print(f"âœ… ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ã¾ã™: {cache_file.absolute()}")
    print(f"   ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: {file_size:,} bytes ({file_size / 1024:.1f} KB)")

    with open(cache_file, 'r', encoding='utf-8') as f:
        cache_data = json.load(f)

    print(f"\nğŸ“Š ã‚­ãƒ£ãƒƒã‚·ãƒ¥çµ±è¨ˆ:")
    print(f"   ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä»¶æ•°: {len(cache_data)} ä»¶")

    # ã‚µãƒ³ãƒ—ãƒ«è¡¨ç¤º
    print(f"\nğŸ“‹ ã‚µãƒ³ãƒ—ãƒ«ï¼ˆæœ€åˆã®3ä»¶ï¼‰:")
    for i, (video_id, entry) in enumerate(list(cache_data.items())[:3], 1):
        title = entry.get('data', {}).get('snippet', {}).get('title', 'N/A')
        timestamp = entry.get('timestamp', 0)
        print(f"   {i}. {video_id}")
        print(f"      ã‚¿ã‚¤ãƒˆãƒ«: {title[:50]}")
        print(f"      ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ™‚åˆ»: {timestamp}")
else:
    print(f"âŒ ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: {cache_file.absolute()}")

print("\n" + "=" * 80)
