# GUI ユーザーマニュアル

**対象バージョン**: v3.3.0+
**最終更新**: 2026-01-07
**ステータス**: ✅ 実装完了

---

## 📖 このマニュアルについて

このドキュメントは、StreamNotify GUI の**全機能を詳細に解説**するマニュアルです。

各ボタン・メニュー・機能の使い方を、シナリオに基づいて説明します。

---

## 🎨 GUI の全体構成

```
┌─────────────────────────────────────────────────────────────┐
│ StreamNotify on Bluesky v3.4.0                   [_][□][×] │
├─────────────────────────────────────────────────────────────┤
│ ツールバー:                                                 │
│ [🔄] [📡/🌐] [🎬] [➕] | [☑️] [☐] | [💾] [🗑️] |          │
│ [🧪] [📤] | [ℹ️] [⚙️] [🔧] [📝] | [ℹ️統計] [設定]        │
├─────────────────────────────────────────────────────────────┤
│ 📋 フィルタパネル                                            │
│ ┌─────────────────────────────────────────────────────────┐│
│ │ タイトル: [              ]                              ││
│ │ 投稿状態: [全て      ▼] 配信元: [全て    ▼]           ││
│ │ タイプ: [全て          ▼]  [🔄 リセット]            ││
│ └─────────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────────┤
│ 📊 動画一覧（Treeview）                                      │
│ ┌─────────────────────────────────────────────────────────┐│
│ │ ☐| ID      |公開日時|配信元|タイプ|タイトル|予定|投稿|画像││
│ │ ☑ | abc123 |2025... |YT   |動画  |新作... |--  |✓  |import││
│ │ ☐ | def456 |2025... |nico |放送中|実況... |予約|--  |--   ││
│ │ ... (スクロール可能)                                    ││
│ └─────────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────────┤
│ 📈 統計情報＆ステータス                                      │
│ 総動画数: 42 | 投稿済み: 28 | 投稿予定: 5 | 未投稿: 9     │
└─────────────────────────────────────────────────────────────┘
```

---

## 🎯 主要機能別ガイド

### 0️⃣ **ツールバー** - ボタン操作ガイド

**最新ツールバー（v3.4.0+）**の全ボタンを説明します。

#### 📊 フィード・更新ボタン

| ボタン | 説明 | 用途 |
|:--|:--|:--|
| 🔄 再読込 | DB から最新データを取得・表示更新 | 他プロセスで更新された場合に使用 |
| 📡/🌐 新着取得 or RSS更新 | YouTube フィード更新（モード自動判定） | WebSub/RSS ポーリング |
| 🎬 Live判定 | YouTube Live 動画を手動判定・分類 | スケジュール/配信中/アーカイブを API から取得して DB 更新 |
| ➕ 動画追加 | 新しい動画を手動追加 | 動画 ID/URL を入力して追加 |

#### 🖱️ 選択・保存ボタン

| ボタン | 説明 |
|:--|:--|
| ☑️ すべて選択 | 画面上のすべての動画にチェック |
| ☐ すべて解除 | すべてのチェックを外す |
| 💾 選択を保存 | チェック状態を DB に永続化 |
| 🗑️ 削除 | 選択した動画を DB から削除（復元不可） |

#### 📤 投稿・テスト

| ボタン | 説明 | 実行内容 |
|:--|:--|:--|
| 🧪 投稿テスト | Dry-run モードで投稿をテスト | ログ出力のみ、実際には投稿しない |
| 📤 投稿設定 | 投稿設定ウィンドウを開く | 各動画の投稿日時・内容を個別設定 |

> **注意**: AUTOPOST モードでは投稿ボタンは無効化されます。

#### 🔧 ツール・設定

| ボタン | 説明 | 用途 |
|:--|:--|:--|
| ℹ️ 統計 | 統計情報を表示 | 全体・配信元別・日別の投稿実績を確認 |
| ⚙️ アプリ設定 | 統合設定ウィンドウを開く | API キー・投稿間隔・アカウント設定など |
| 🔧 プラグイン | 導入プラグイン一覧を表示 | プラグインの有効/無効を確認 |
| 📝 テンプレート編集 | テンプレートエディタを開く | YouTube/Twitch 投稿テンプレート編集 |

---

### 1️⃣ **フィルタパネル** - 動画を探す

#### 📝 タイトル検索

**目的**: キーワードで動画を検索

```
使い方:
1. 「タイトル検索」欄にキーワードを入力
2. 一覧が自動で絞り込まれる
3. 複数キーワードはスペース区切り（例: 「新作 日本」）
```

#### 📊 投稿状態で絞り込み

| 選択肢 | 説明 |
|:--|:--|
| 全て | すべての動画を表示 |
| 投稿済み | 既に Bluesky に投稿済み |
| 未投稿 | 投稿していない動画のみ |

#### 🌐 配信元で絞り込み

| 選択肢 | 説明 |
|:--|:--|
| 全て | すべての動画を表示 |
| YouTube | YouTube の動画のみ |
| Niconico | ニコニコの動画のみ |

#### 🎬 タイプで絞り込み（v3.2.0+）

YouTube Live 動画の種類別に絞り込みます。

| 選択肢 | 説明 |
|:--|:--|
| 全て | すべての動画を表示 |
| 🎬 動画 | 通常の動画ファイル |
| 📹 アーカイブ | ライブ配信の録画・保存版 |
| 📅 放送予約 | スケジュール済みの配信予約 |
| 🔴 放送中 | 現在配信中のライブ |
| ⏹️ 放送終了 | 配信が終了した動画 |
| 🎆 プレミア | YouTube プレミア（限定ライブ） |

**使用例**:
- 「🔴 放送中」を選択 → リアルタイム配信だけを表示
- 「📅 放送予約」を選択 → 予定配信を確認
- 「📹 アーカイブ」を選択 → 過去の配信録画を確認

> **タイプの自動判定**: 「🎬 Live判定」ボタンで YouTube API から最新情報を取得します。

#### 🔄 リセット

**目的**: すべてのフィルタをクリア

```
使い方:
1. 「🔄 リセット」ボタンをクリック
2. 全フィルタが解除される
3. すべての動画が表示される
```

---

### 2️⃣ **動画一覧（テーブル）** - 動画を管理

#### ☑️ チェックボックス（選択）

**目的**: 投稿対象の動画を選択

```
使い方:
1. 動画行の左側のチェックボックスをクリック
2. ☑️ マークが表示される
3. 複数選択可能
```

**複数選択の例**:
```
☑ 新作動画1
☑ 新作動画2
☐ 古い動画
☑ 新作動画3

→ 3つの動画が選択状態
```

### 2️⃣ **動画一覧（テーブル）** - 動画を管理

テーブルは最新の実装（v3.4.0+）では以下のカラムで構成されています。

#### テーブルカラム構成

| # | カラム | 説明 | 操作 |
|:--|:--|:--|:--|
| 1 | ☑️ | チェックボックス（選択） | クリックで選択/解除 |
| 2 | Video ID | 動画の一意識別子 | タップでコピー可 |
| 3 | 公開日時 | 動画公開日時（JST） | ソート可 |
| 4 | 配信元 | YouTube / Niconico | フィルタで絞込可 |
| 5 | タイプ | 動画/アーカイブ/放送予約/放送中/放送終了/プレミア | フィルタで絞込可 |
| 6 | タイトル | 動画のタイトル | 長文は省略表示 |
| 7 | 投稿予定/投稿日時 | 予約日時 or 投稿完了日時 | ダブルクリックで編集 |
| 8 | 投稿実績 | ✓（投稿済み） / –（未投稿） | 自動更新 |
| 9 | 画像モード | import / url / auto | 右クリック or ダブルクリックで編集 |
| 10 | 画像ファイル | 画像ファイル名 | 右クリック or ダブルクリックで編集 |

#### ☑️ チェックボックス（選択）

**目的**: 投稿対象の動画を選択

```
使い方:
1. 動画行のチェックボックスをクリック
2. ☑️ マークが表示される
3. 複数選択可能
4. 「💾 選択を保存」で DB に反映
```

#### 📝 ダブルクリック編集

テーブル内の特定カラムをダブルクリックすると、ダイアログで編集できます。

| カラム | ダイアログ | 機能 |
|:--|:--|:--|
| 投稿予定/投稿日時（#7） | 投稿日時設定 | 予約投稿日時を編集・クイック設定 |
| 画像モード（#9）/ 画像ファイル（#10） | 画像設定ダイアログ | 画像ファイル・URL・自動取得を管理 |

#### 🖱️ 右クリックコンテキストメニュー

動画行を右クリックすると、以下の操作メニューが表示されます：

| メニュー | 説明 |
|:--|:--|
| ⏰ 予約日時を設定 | 投稿予定日時を設定・編集 |
| 🖼️ 画像を設定 | サムネイル画像を管理 |
| 🗑️ 削除 | この動画を DB から削除 |
| ❌ 選択解除 | この動画の選択を解除 |

---

### 3️⃣ **投稿日時・画像の設定**（v3.3.0+）

#### ⏰ 投稿日時設定ダイアログ

予約投稿の日時を設定します。ダイアログはダブルクリック or 右クリックから開きます。

**機能一覧**:

| セクション | 説明 |
|:--|:--|
| 📅 日付選択 | Spinbox で年/月/日を設定 |
| 🕐 時間選択 | Spinbox で時/分を設定（24時間形式） |
| ⚡ クイック設定 | 5分後/15分後/30分後/1時間後を即座に設定 |

**ボタン**:
- ✅ 保存 → 予約日時を設定して保存
- ❌ 選択解除 → この動画の投稿予約を取消
- ✕ キャンセル → 何もしない

> **タイムゾーン**: すべて JST（日本標準時）で処理されます。

#### 🖼️ 画像設定ダイアログ（v3.4.0+拡張版）

動画の投稿に使用するサムネイル画像を管理します。複数の方法で画像を設定できます。

**image_filename の形式**:
- 通常は `video_id.jpg` に統一（例: `dQw4w9WgXcQ.jpg`）

**方法1: ファイルから選択**

```
1. 「📂 参照」ボタンをクリック
2. PCの任意のフォルダからファイルを選択
3. ファイル名が自動的に video_id.jpg に統一される
4. 画像処理（リサイズ・JPG変換）が自動実行
5. images/{配信元}/import/ に保存
```

**方法2: URLからダウンロード**

```
1. 「URL:」欄に画像 URL を入力
2. 「⬇️ ダウンロード」をクリック
3. 画像が自動ダウンロード・処理
4. DB に反映
```

**方法3: 自動取得**

| 配信元 | ボタン | 説明 |
|:--|:--|:--|
| YouTube | YouTubeサムネイル取得 | YouTube API から高品質サムネイルを取得 |
| Niconico | OGPから取得 | ニコニコ動画の OGP メタデータから画像取得 |
| 共通 | 未設定画像を再ダウンロード | 画像未設定のすべての動画を一括処理 |

**ボタン**:
- ✅ 保存 → 画像ファイル設定を保存
- 🔍 プレビュー → 登録済みの画像を別ウィンドウで表示（解像度・形式・パスも表示）
- ❌ クリア → 画像設定を削除
- ✕ キャンセル → キャンセル

---

### 4️⃣ **操作パネル** - 投稿実行

#### 📤 [投稿設定]

**目的**: 各動画の投稿内容・日時を詳細設定して投稿

```
使い方:
1. 動画を1つ以上選択（☑ マーク）
2. 「📤 投稿設定」ボタンをクリック
3. 投稿設定ウィンドウが開く（動画ごと）
4. 「📤 投稿実行」で投稿開始
```

**投稿設定ウィンドウの内容**:
- 動画タイトル・ID 表示
- サムネイル画像プレビュー
- テンプレート選択（YouTube Live タイプ別）
- 投稿内容（テンプレート + カスタマイズ）
- 投稿予定日時の確認・変更
- 投稿確認コマンド

**ボタン**:
- 📤 投稿実行 → 実際に Bluesky に投稿（スケジュール投稿対応）
- 🧪 投稿テスト → ドライラン（ログ出力のみ、投稿なし）
- ✕ キャンセル → 投稿を中止

#### 🧪 [投稿テスト]

**目的**: 投稿をシミュレーション（実際には投稿しない）

```
使い方:
1. 動画を1つ以上選択
2. 「🧪 投稿テスト」ボタンをクリック
3. 各動画について投稿設定ウィンドウが開く
4. ウィンドウ内の「🧪 投稿テスト」ボタンで実行
5. ログウィンドウに処理内容が表示される
```

**用途**:
- 設定が正しいか確認
- テンプレートが正しく機能するか確認
- Bluesky 認証情報が正しいか確認
- 投稿内容（本文・画像）をプレビュー

> **重要**: テストなので Bluesky に投稿されません。

#### 🗑️ [削除]

**目的**: 選択した動画をデータベースから削除

```
使い方:
1. 削除したい動画を選択
2. ツールバーの「🗑️ 削除」ボタンをクリック
3. 確認ダイアログが表示される
4. 「OK」をクリックして削除

⚠️ 削除すると復元できません
```

---

### 5️⃣ **統計情報** - 投稿実績を確認（v3.2.0+）

ツールバーの「ℹ️ 統計」ボタンをクリックすると、詳細な統計情報ウィンドウが表示されます。

**表示内容**:

```
📊 統計情報（v3.2.0拡張版）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【 全体統計 】
総動画数:     42件
投稿済み:     28件（67%）
投稿予定:     5件
未処理:       9件

【 配信元別統計 】
YouTube:      30件 (投稿済み: 20件)
ニコニコ:     12件 (投稿済み: 8件)

【 過去7日間の投稿状況 】
  01/07（火）: 全 5 件 | 投稿済み 3 件
  01/06（月）: 全 3 件 | 投稿済み 2 件
  01/05（日）: 全 4 件 | 投稿済み 4 件
  ...
```

**統計項目説明**:
- **総動画数**: DB に登録されているすべての動画数
- **投稿済み**: Bluesky に投稿完了した動画
- **投稿予定**: scheduled_at が設定されている動画
- **未処理**: 未投稿かつ投稿予定未設定の動画
- **配信元別**: YouTube とニコニコの内訳
- **日別集計**: 過去7日間の公開日時別集計

---

## 📖 実践シナリオ

### シナリオ 1: YouTube Live の「放送中」動画を投稿したい

```
1. ツールバーの「🎬 Live判定」をクリック
   → YouTube API から最新情報を取得・DB 更新
2. フィルタ - タイプを「🔴 放送中」に変更
3. フィルタ - 投稿状態を「未投稿」に変更
4. 放送中で未投稿の動画が表示される
5. 全動画にチェック（☑）を入れる
6. 「💾 選択を保存」をクリック
7. 「📤 投稿設定」をクリック
8. 各動画について投稿設定ウィンドウで内容確認
9. 「📤 投稿実行」で投稿開始

✅ 完了！
```

### シナリオ 2: 予約投稿を設定したい

```
1. 動画を選択（☑）
2. テーブルの「投稿予定/投稿日時」列をダブルクリック
3. 投稿日時設定ダイアログが開く
4. 日時を設定（またはクイック設定で「1時間後」など選択）
5. 「✅ 保存」をクリック
6. 「次のステップ」で画像を設定
7. 「💾 選択を保存」で DB に反映
8. 「📤 投稿設定」で確認後、「📤 投稿実行」

→ 指定日時に自動投稿（AUTOPOST モード）or
  その時間に投稿可能状態（selfpost モード）

✅ 完了！
```

### シナリオ 3: YouTube のサムネイル画像を一括取得

```
1. フィルタ - 配信元を「YouTube」に変更
2. 動画を選択
3. テーブルの「画像ファイル」列をダブルクリック
4. 画像設定ダイアログが開く
5. 「YouTubeサムネイル取得」ボタンをクリック
   → 高品質サムネイルを YouTube API から取得
6. 自動的に images/YouTube/import に保存
7. ダイアログが自動的に閉じて、「成功」メッセージ

→ 複数の動画を連続で処理可能

✅ 完了！
```

### シナリオ 4: 投稿テストで設定を確認したい

```
1. 動画を1つ選択（☑）
2. 「💾 選択を保存」で DB に反映
3. ツールバーの「🧪 投稿テスト」をクリック
4. 投稿設定ウィンドウが開く（ドライランモード）
5. 投稿内容・画像・テンプレートを確認
6. 「🧪 投稿テスト」ボタンをクリック
7. ログウィンドウにテスト結果が表示される

成功例:
  ✅ ドライラン: 投稿をシミュレートしました
  ✅ 本文: ... (生成された投稿文)
  ✅ 画像: ... (使用される画像ファイル)
  ✅ テスト完了（実投稿なし）

❌ エラー例の場合、ログのエラーメッセージから
  原因を特定・修正

✅ テスト完了！
```

---

## 🎛️ 統合設定ウィンドウ（v3.3.0+）

ツールバーの「⚙️ アプリ設定」ボタンをクリックすると、統合設定ウィンドウが開きます。

### 設定ウィンドウの構成

- タブ式 UI で設定ファイルから設定する項目を一元管理できるようになりました。
- 各タブで関連する設定項目をグループ化し、わかりやすく整理しています。
- 各設定項目には説明が付いており、初心者でも迷わず設定できます。
- 以下は代表的な設定項目を抜粋したものです。

#### 📋 basic（基本設定）タブ

| 項目 | 説明 | 型 |
|:--|:--|:--|
| **APP_MODE** | 動作モード（selfpost / autopost / dry_run / collect） | 選択 |
| **POLL_INTERVAL_MINUTES** | RSS ポーリング間隔（分） | 数値 |
| **DEBUG** | デバッグログの出力 | チェック |
| **PREVENT_DUPLICATE_POSTS** | 重複投稿の防止 | チェック |

#### 👤 accounts（アカウント）タブ

| 項目 | 説明 |
|:--|:--|
| **BLUESKY_HANDLE** | Bluesky ユーザーハンドル（@除く） |
| **BLUESKY_PASSWORD** | Bluesky アプリパスワード |
| **YOUTUBE_API_KEY** | YouTube API キー（動画取得用） |

#### 📤 posting（投稿）タブ

| 項目 | 説明 |
|:--|:--|
| **TEMPLATE_** | テンプレートファイルのパス |
| **AUTOPOST_** | 自動投稿の有効化設定 |

#### 🎬 live（Live 判定）タブ

| 項目 | 説明 |
|:--|:--|
| **YOUTUBE_LIVE_** | YouTube Live 判定の詳細設定 |
| **YOUTUBE_FEED_MODE** | フィード取得モード（websub / rss） |

---

## 🎛️ その他の機能（v3.4.0+）

### 📝 テンプレート編集（テンプレートエディタ）

ツールバーの「📝 テンプレート編集」ボタンをクリックすると、投稿テンプレートエディタが開きます。

**編集対象**:
- **YouTube テンプレート**: video / schedule / online / offline / archive
- **Niconico テンプレート**: video
- **Twitch テンプレート**: online / offline / raid

テンプレートは Jinja2 形式で、以下の変数が使用可能です。

使用可能な変数については、[TEMPLATE_SYSTEM.md](../Guides/TEMPLATE_GUIDE.md) を参照してください。


### 🔧 プラグイン管理

ツールバーの「🔧 プラグイン」ボタンをクリックすると、導入プラグイン一覧が表示されます。

**表示内容**:
- プラグイン名
- バージョン
- 説明
- ステータス（✅有効 / ⚪無効）

プラグインの有効/無効を切り替えることで、投稿時の動作をカスタマイズできます。

---

## 💡 操作のコツ

### ✅ 効率的な検索方法

```
複数キーワード検索:
- タイトル欄に「新作 実況」と入力
  → タイトルに「新作」と「実況」の両方を含む動画を表示

投稿履歴確認:
- 投稿状態を「投稿済み」に設定
  → 既に投稿した動画を一覧で確認

複合検索:
- タイトル: 「ライブ」
- 投稿状態: 「未投稿」
- 配信元: 「YouTube」
  → YouTube のライブ関連で未投稿の動画
```

### ⚡ 大量投稿の手順

```
1. フィルタで対象動画を絞り込む
2. 絞り込まれた動画が全て表示されることを確認
3. 画面上部のチェックボックスをクリック（全選択）
4. 「投稿実行」をクリック
5. ログで完了を確認

💡 「投稿テスト」で先に確認すると安全
```

### 🔒 重複投稿の防止

```
settings.env で PREVENT_DUPLICATE_POSTS=true に設定
  ↓
同じ動画を投稿しようとしたとき
  ↓
⚠️ 「この動画は既に投稿済みです」と警告
  ↓
投稿が自動中止

→ 誤った重投稿を防止
```

---

## 🐛 よくあるエラーと対応

### ❌ 「フィルタが反応しない」

**対応**:
1. アプリを再起動
2. 「🔄 リセット」をクリック
3. 再度入力

### ❌ 「ログウィンドウにエラーが表示される」

**対応**:
1. ログの内容を確認
2. [FAQ_TROUBLESHOOTING_BASIC.md](./FAQ_TROUBLESHOOTING_BASIC.md) を参照
3. 該当する対応方法を実行

### ❌ 「投稿できない」

**対応**:
1. 「投稿テスト」で確認
2. ログでエラーメッセージを確認
3. Bluesky の認証情報が正しいか確認

---

## 📞 さらに詳しく

| 目的 | ドキュメント |
|:--|:--|
| **テンプレート編集** | [TEMPLATE_SYSTEM.md](../Technical/TEMPLATE_SYSTEM.md) |
| **テンプレート変数** | [TEMPLATE_GUIDE.md](../Guides/TEMPLATE_GUIDE.md) |
| **フィルタ詳細** | [GUI_FILTER_AND_DUPLICATE_PREVENTION.md](../Technical/GUI_FILTER_AND_DUPLICATE_PREVENTION.md) |
| **トラブルシューティング** | [FAQ_TROUBLESHOOTING_BASIC.md](./FAQ_TROUBLESHOOTING_BASIC.md) |
| **デバッグ・ログ** | [DEBUG_DRY_RUN_GUIDE.md](../Technical/DEBUG_DRY_RUN_GUIDE.md) |

---

**GUI マスター完了！次は [FAQ_TROUBLESHOOTING_BASIC.md](./FAQ_TROUBLESHOOTING_BASIC.md) で困った時の対応を学びましょう！**

**最終更新**: 2026-01-07（v3.4.0 機能に対応）
