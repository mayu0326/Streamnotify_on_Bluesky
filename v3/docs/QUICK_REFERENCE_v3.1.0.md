# v3.3.0 - クイックレファレンス

**バージョン**: v3.3.0
**リリース日**: 2025-12-20
**実装状況**: ✅ 完全完成

---

## 🆕 v3.3.0 で追加された 3 つの新機能

### 1️⃣ AUTOPOST 完全自動投稿モード（仕様 v1.0）

**設定方法**: `settings.env` を編集

```env
APP_MODE=autopost
AUTOPOST_INTERVAL_MINUTES=5
AUTOPOST_LOOKBACK_MINUTES=30
AUTOPOST_UNPOSTED_THRESHOLD=20
```

**特徴**:
- 🤖 完全自動投稿（人間の介入なし）
- 🛡️ 3段階の安全弁機構
- 🎯 動画種別フィルタ（Normal/Shorts/Member/Premiere）
- ⚠️ セーフモード起動（異常検知）

**メリット**:
- Bot運用に適した予測可能な動作
- スパム化防止の安全弁が多層
- 誤設定による大量投稿を防止

---

### 2️⃣ YouTube Live 統合モード制御

**設定方法**: `settings.env` を編集

```env
YOUTUBE_LIVE_AUTO_POST_MODE=all
```

**5段階制御**:
- `all`: 予約枠+配信+アーカイブすべてを投稿
- `schedule`: 予約枠と配信開始のみ投稿
- `live`: 配信開始・終了のみ投稿
- `archive`: アーカイブのみ投稿
- `off`: YouTube Live 投稿なし

**メリット**:
- シンプルな1つのフラグで完全制御
- 旧フラグ（START/END）との互換性維持
- より柔軟なライブイベント管理

---

### 3️⃣ セーフモード起動（仕様 section 5.3）

**動作**:
- 起動時に DB の投稿マーク状態を確認
- 異常（リセット検知）時は AUTOPOST を自動抑止
- ユーザーにDB復旧を促す

**メリット**:
- 予期しない大量投稿を自動防止
- DB破損・リセット時に自動保護

---

## 📚 ドキュメント入口

### 🤖 AUTOPOST を使いたい

**👉 最初にこれを読んでください**: [AUTOPOST/SELFPOST 機能仕様書](./Technical/AUTOPOST_SELFPOST_機能仕様書.md)

- 2つのモード定義
- 安全弁機構の詳細
- 環境変数の完全リファレンス

### 📺 YouTube Live を制御したい

**技術詳細**: [YouTube Live プラグイン実装](./Technical/YOUTUBE_LIVE_PLUGIN_IMPLEMENTATION.md)

- 5段階MODE制御の仕様
- ポーリング間隔の説明
- 旧フラグからの移行ガイド

### 🔧 設定項目を確認したい

**リファレンス**: [設定項目一覧](./Technical/SETTINGS_OVERVIEW.md)

- 全設定項目の説明
- デフォルト値と範囲
- セクション別の整理

### ⚙️ デベロッパー向け

**実装詳細**: [モジュール一覧](./Technical/ModuleList_v3.md)

- 各ファイルの役割
- 依存関係
- ロギング構成

---

## 🎯 よくある使用パターン

### パターン 1: 「新作」という単語の未投稿動画を探す

```
1. タイトル欄に「新作」と入力
2. 投稿状態を「未投稿」に選択
3. マッチした動画が一覧に表示される
↓
該当する動画をチェックして投稿実行
```

### パターン 2: YouTube だけの投稿済み動画を確認

```
1. 配信元を「YouTube」に選択
2. 投稿状態を「投稿済み」に選択
3. 一覧にアップロード済みの YouTube 動画が表示される
↓
投稿状況を確認
```

### パターン 3: 誤入力による重投稿を防止

```
settings.env で PREVENT_DUPLICATE_POSTS=true に設定
↓
同じ動画を 2 度投稿しようとすると：
「この動画は既に投稿済みです」と警告表示
↓
投稿が中止されて安全
```

---

## 🔧 設定リファレンス

### PREVENT_DUPLICATE_POSTS

```env
# 重複投稿防止オプション
# true: 有効（推奨）
# false: 無効
PREVENT_DUPLICATE_POSTS=true
```

**有効にした場合の変動**:
- ✅ 同じ動画の 2 度投稿をブロック
- ⚠️ 重複時に警告メッセージ表示
- 🛡️ 投稿が自動中止

**無効にした場合**:
- ✗ チェックなし
- 何度でも投稿可能

---

## 🐛 トラブルシューティング クイック版

### Q: フィルタが反応しない
**A**: アプリを再起動してください

### Q: 重複投稿防止が機能していない
**A**:
1. `PREVENT_DUPLICATE_POSTS=true` か確認
2. アプリを再起動
3. ドライランモードではなく本投稿で確認

### Q: フィルタをすべてクリアしたい
**A**: 「🔄 リセット」ボタンをクリック

**詳細は**: [GUI フィルタ・重複投稿防止ガイド - トラブルシューティング](./Guides/GUI_FILTER_AND_DUPLICATE_PREVENTION.md#トラブルシューティング)

---

## 📊 v3.1.0 実装サマリー

| 項目 | 内容 |
|:--|:--|
| **バージョン** | v3.1.0 |
| **リリース日** | 2025-12-19 |
| **新機能数** | 2 個 |
| **実装ファイル** | 4 個（コード）+ 2 個（ドキュメント） |
| **コード行数** | 約 230 行 |
| **ドキュメント行数** | 約 400 行 |
| **ステータス** | ✅ 本番対応 |

---

## 🚀 今後の計画

### v3.3.1（2025-12月末）
- バグ修正（ユーザーフィードバック反映）
- パフォーマンス最適化

### v3.4.0（2026 年 1 月）
- フィルタ条件の保存機能
- 高度なフィルタオプション（日付範囲など）
- 重複投稿防止の強化

### v3.5.0+（2026 年 2 月以降）
- 複合フィルタのテンプレート化
- 正規表現フィルタ対応
- AI による類似動画検知

---

## 📖 完全ガイドへのリンク

| ドキュメント | 用途 | リンク |
|:--|:--|:--|
| **ユーザーガイド** | 使い方・操作方法 | [GUI フィルタ・重複投稿防止ガイド](./Guides/GUI_FILTER_AND_DUPLICATE_PREVENTION.md) |
| **実装報告書** | 開発者向け・技術詳細 | [v3.1.0 実装完了報告書](./local/IMPLEMENTATION_COMPLETE_v3.1.0_2025-12-19.md) |
| **ファイル変更** | 修正内容・パス確認 | [ファイル修正サマリー](./local/FILES_MODIFIED_SUMMARY_v3.1.0.md) |
| **モジュール情報** | API・クラス詳細 | [モジュール一覧](./Technical/ModuleList_v3.md) |
| **ロードマップ** | 今後の計画 | [将来ロードマップ](./References/FUTURE_ROADMAP_v2.md) |

---

## ✅ チェックリスト

### インストール後の確認事項

- [ ] 新バージョン v3.1.0 に更新した
- [ ] アプリケーションを再起動した
- [ ] フィルタパネルが表示されている
- [ ] settings.env に新しい設定項目がある

### 新機能の確認

- [ ] タイトル検索で試しにキーワードを入力
- [ ] フィルタパネルが反応する
- [ ] 「🔄 リセット」で初期状態に戻る
- [ ] `PREVENT_DUPLICATE_POSTS=true` で有効化
- [ ] 重複投稿時に警告が表示される

---

**v3.1.0 は本番対応完了です。安心してご利用ください。**

質問・問題がある場合は、[トラブルシューティング](./Guides/GUI_FILTER_AND_DUPLICATE_PREVENTION.md#トラブルシューティング) をご参照ください。

---

*最終更新: 2025-12-19*
